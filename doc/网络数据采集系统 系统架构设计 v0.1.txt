网络数据采集系统(Network Data Collection System) 系统架构设计 v0.1

1. 系统基本构成
  系统分为：下载器，解析器，任务启动器
  下载器：完成对URL的网络数据下载
  解析器：完成对下载数据的解析
  任务启动器：按任务分配目录，生成下载器、解析器用的配置文件，启动下载器、解析器开始任务
  
2. 各模块的配置、输入及输出
  下载器：
    配置：待采集URL文件保存目录，下载数据保存目录，日志目录
    输入：一组文本文件(文件名为YYYYMMDDHHmmSSsss)，每一行是一个URL
    输出：以下载URL的MD5值为文件名保存下载数据，下载数据需转换为文本格式，且添加第一行为URL
    操作：
      1）由待采集URL文件保存目录获得一个URL文件
      2）依次获得文件中每行的URL
      3）计算URL的MD5
      4）查询下载数据保存目录中是否已存在MD5值为文件名的文件
      4.1）如果是，结束URL下载，继续2）
      4.2）如果否，创建该文件
      4.2.1）下载URL
      4.2.2）保存下载内容，且添加第一行为URL，继续2）
      5）继续1）
      6）无URL文件，则等待一段时候后，再次继续1）；如多次尝试无法发现新增文件，则程序结束
      
  解析器：
    配置：待采集URL文件保存目录，下载数据保存目录，解析结果保存目录，解析规则保存目录，日志目录
    输入：一组下载数据的文本文件，一组解析规则
    输出：采集数据，待下载URL
    操作：
      1）由下载数据保存目录获得一个下载数据
      2）计算下载数据对应URL的MD5值
      3）解析结果保存目录目录中是否已存在MD5值为文件名的文件
      3.1）如果是，结束URL下载，继续1）
      3.2）如果否，创建该文件
      3.2.1）由解析规则保存目录获得一个解析规则
      3.2.2）测试解析规格是否匹配下载数据的URL
      3.2.2.1）不匹配，继续3.2.1）
      3.2.2.2）匹配，开始解析文件
      3.2.2.2.1）依次获得每个解析规则
      3.2.2.2.2）按解析规则，解析数据，获得结果
      3.2.2.2.3）按解析规则的后续动作，新增待下载URL或新增解析结果，继续3.2.1）
      3.2.3）保存待下载URL文件及解析结果文件，继续1）
      4）无下载文件，则等待一段时候后，再次继续1）；如多次尝试无法发现新增文件，则程序结束
      
  任务启动器：
    配置：
    输入：任务目录根目录，启动URL，解析规则目录
    输出：创建相关目录，生成配置，启动下载器及解析器
    操作：
      1）在任务目录根目录，按任务执行时间创建任务目录，内含：待采集URL文件保存目录，下载数据保存目录，解析结果保存目录，日志目录
      2）生成下载器配置文件
      3）生成解析器配置文件
      4）启动下载器
      5）启动解析器
      
